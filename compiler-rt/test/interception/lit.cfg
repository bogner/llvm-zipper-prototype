# -*- Python -*-

# Setup source root.
config.test_source_root = os.path.join(os.path.dirname(__file__), "TestCases")

# Setup config name.
config.name = "Interception"

# Add library sustitutions.
if config.host_os == 'Windows':
  libpath = os.path.join(config.target_lib_dir, config.target_lib + ".lib")
  config.substitutions.append( ("%inter_lib", libpath))
else:
  libpath = os.path.join(config.target_lib_dir, "lib" + config.target_lib + ".a")
  config.substitutions.append( ("%inter_lib", libpath))

# Add clang substitutions.
config.substitutions.append( ("%clang ", " ".join([config.clang,
    config.target_cflags, "-I"+config.sources_dir, ""]) ))

# Configure clang_cl for Windows.
if config.host_os == 'Windows':
  clang_cl_invocation = config.clang.replace("clang.exe","clang-cl.exe")
  config.substitutions.append( ("%clang_cl ", " ".join([clang_cl_invocation,
      config.target_cflags, "/I"+config.sources_dir, ""]) ))

# Files to be considered for tests.
config.suffixes = ['.c', '.cc', '.cpp']
