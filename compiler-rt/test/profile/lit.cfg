# -*- Python -*-

import os

# Setup config name.
config.name = 'Profile'

# Setup source root.
config.test_source_root = os.path.dirname(__file__)

# Test suffixes.
config.suffixes = ['.c', '.cc', '.cpp', '.m', '.mm', '.ll', '.test']

# Add clang substitutions.
config.substitutions.append( ("%clang ", config.clang + " ") )
config.substitutions.append( ("%clang_profgen ", config.clang + " -fprofile-instr-generate ") )
config.substitutions.append( ("%clang_profuse=", config.clang + " -fprofile-instr-use=") )

# Profile tests are currently supported on Linux and Darwin only.
# TODO: change to: if config.host_os not in ['Linux', 'Darwin']:
if config.host_os not in ['Darwin']:
  config.unsupported = True
