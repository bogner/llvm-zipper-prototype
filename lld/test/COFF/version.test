# RUN: lld -flavor link2 /entry:main /subsystem:console /out:%t.exe \
# RUN:   %p/Inputs/ret42.obj
# RUN: llvm-readobj -file-headers %t.exe | FileCheck -check-prefix=DEFAULT %s

DEFAULT: MajorImageVersion: 0
DEFAULT: MinorImageVersion: 0

# RUN: lld -flavor link2 /entry:main /subsystem:console /out:%t.exe \
# RUN:   /version:11 %p/Inputs/ret42.obj
# RUN: llvm-readobj -file-headers %t.exe | FileCheck -check-prefix=CHECK1 %s

CHECK1: MajorImageVersion: 11
CHECK1: MinorImageVersion: 0

# RUN: lld -flavor link2 /entry:main /subsystem:console /out:%t.exe \
# RUN:   /version:11.22 %p/Inputs/ret42.obj
# RUN: llvm-readobj -file-headers %t.exe | FileCheck -check-prefix=CHECK2 %s

CHECK2: MajorImageVersion: 11
CHECK2: MinorImageVersion: 22
