# RUN: mkdir -p %t/a %t/b
# RUN: cp %p/Inputs/std64.lib %t/a/
# RUN: cp %p/Inputs/std64.lib %t/b/

# RUN: env LIB=%t/a lld -flavor link2 /out:%t.exe /entry:main /verbose \
# RUN:   std64.lib /subsystem:console \
# RUN:   %p/Inputs/hello64.obj /libpath:%t/b >& %t.log
# RUN: FileCheck -check-prefix=CHECK1 %s < %t.log

# RUN: lld -flavor link2 /out:%t.exe /entry:main /verbose std64.lib \
# RUN:   /subsystem:console %p/Inputs/hello64.obj \
# RUN:   /libpath:%t/a /libpath:%t/b >& %t.log
# RUN: FileCheck -check-prefix=CHECK1 %s < %t.log

CHECK1: Reading {{.*}}/a/std64.lib

# RUN: env LIB=%t/b lld -flavor link2 /out:%t.exe /entry:main /verbose \
# RUN:   /subsystem:console std64.lib %p/Inputs/hello64.obj \
# RUN:   /libpath:%t/a >& %t.log
# RUN: FileCheck -check-prefix=CHECK2 %s < %t.log

# RUN: lld -flavor link2 /out:%t.exe /entry:main /verbose /subsystem:console \
# RUN:   std64.lib %p/Inputs/hello64.obj /libpath:%t/b /libpath:%t/a >& %t.log
# RUN: FileCheck -check-prefix=CHECK2 %s < %t.log

CHECK2: Reading {{.*}}/b/std64.lib
