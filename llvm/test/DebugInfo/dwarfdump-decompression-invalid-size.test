REQUIRES: zlib

// dwarfdump-decompression-invalid-size.elf-x86-64 is prepared using following
// source code and invocation:
// test.cpp:
// int main() { return 0; }
//
// gcc test.cpp -o out -g -Wl,--compress-debug-sections,zlib
//
// After that result object was modified manually. Decompressed size of
// .debug_frame section was changed to 0xffffffffffffffff in compression
// header.
RUN: not llvm-dwarfdump %p/Inputs/dwarfdump-decompression-invalid-size.elf-x86-64 2>&1 | FileCheck %s

CHECK: decompression of '.debug_frame' failed: unable to allocate 18446744073709551615 bytes.
